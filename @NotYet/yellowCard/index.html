<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>yellowCard</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
      integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../scss/css reset.css" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <section id="bg">
      <!--205-->
      <div class="frame"></div>
      <iframe
        src="https://www.youtube.com/embed/nM0xDI5R50E?playlist=nM0xDI5R50E&autoplay=1&loop=1&mute=1&controls=0&showinfo=&modestbranding=1&cc_load_policy=0&iv_load_policy=3&start=142"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      ></iframe>
    </section>
    <section id="intro">
      <div class="titleBox">
        <div class="top"><span>BBI BBI</span></div>
        <div class="bottom"><span>BBI BBI</span></div>
      </div>
    </section>
    <section id="main"></section>

    <svg style="display: none">
      <defs>
        <filter id="jiggle0">
          <feTurbulence
            id="turbulence"
            baseFrequency="0.02"
            numOctaves="3"
            result="noise"
            seed="0"
          />
          <feDisplacementMap
            id="displacement"
            in="SourceGraphic"
            in2="noise"
            scale="6"
          />
        </filter>
        <filter id="jiggle1">
          <feTurbulence
            id="turbulence"
            baseFrequency="0.02"
            numOctaves="3"
            result="noise"
            seed="1"
          />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="8" />
        </filter>

        <filter id="jiggle2">
          <feTurbulence
            id="turbulence"
            baseFrequency="0.02"
            numOctaves="3"
            result="noise"
            seed="2"
          />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="6" />
        </filter>
        <filter id="jiggle3">
          <feTurbulence
            id="turbulence"
            baseFrequency="0.02"
            numOctaves="3"
            result="noise"
            seed="3"
          />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="8" />
        </filter>

        <filter id="jiggle4">
          <feTurbulence
            id="turbulence"
            baseFrequency="0.02"
            numOctaves="3"
            result="noise"
            seed="4"
          />
          <feDisplacementMap in="SourceGraphic" in2="noise" scale="6" />
        </filter>
      </defs>
    </svg>
    <script>
      const $titleBox = document.querySelector(".titleBox"),
        $titleTop = $titleBox.querySelector(".top"),
        $titleBottom = $titleBox.querySelector(".bottom"),
        $main = document.querySelector("#main");

      let scrollY, windowHeight, $mainHeight;

      function resize() {
        document.body.style.height = `${window.innerHeight * 2}px`;
        $titleBox.style.height = `${
          $titleBox.querySelector("span").offsetHeight
        }px`;
      }

      function titleScroll() {
        scrollY = window.scrollY;
        windowHeight = window.innerHeight;

        $mainHeight = ((scrollY * 2) / windowHeight) * 150;
        $mainHeight < 50 ? 0 : $mainHeight;

        $main.style.height = `${$mainHeight}px`;
        $titleTop.style.top = $titleBottom.style.bottom = `${
          ((scrollY * 2) / windowHeight) * -100
        }px`;

        $titleBox.style.filter = `url(#jiggle${Math.floor(scrollY % 5)})`;
        $titleTop.style.filter = $titleBottom.style.filter = `saturate(${
          1 - scrollY / windowHeight
        })`;
      }

      window.addEventListener("scroll", () => {
        titleScroll();
      });

      window.addEventListener("resize", () => {
        resize();
      });

      init();
      function init() {
        resize();
      }
    </script>
  </body>
</html>
